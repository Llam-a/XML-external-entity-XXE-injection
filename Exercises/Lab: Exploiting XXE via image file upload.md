# Lab: Exploiting XXE via image file upload

This lab lets users attach avatars to comments and uses the Apache Batik library to process avatar image files.

To solve the lab, upload an image that displays the contents of the /etc/hostname file after processing. Then use the "Submit solution" button to submit the value of the server hostname.

# Overview:

![image](https://github.com/Llam-a/XML-external-entity-XXE-injection/assets/115911041/f7d3cdb1-c1d7-41ff-9364-32bbaef4a840)

Ta có một web blog đơn giản, không có chức năng đăng kí và đăng nhập chỉ có chức năng comment và upload file SVG.

Nếu ta nhắc đến File upload thì có các dạng sau:

- RCE

- Cross-Site Scripting

- AUTHZ/N ISSUES

- SSRF/XXE

Ở lab này, nếu ta  upload 1 file SVG ta sẽ được trả về XXE. Định dạng tập tin SVG là một định dạng hình ảnh dựa trên XML, cho phép mô tả đồ họa vector tĩnh và động với khả năng tự động điều chỉnh kích thước..

Nhìn sơ qua thì roadmap của mình như sau. Upload 1 file SVG reference 1 entity và nếu kết quả trả về là xác định có entity.

# Solution:

```xml

```

Trong ví dụ trên, tập tin SVG chứa một yêu cầu trích xuất nội dung của tập tin `/etc/passwd`. Điều này được thực hiện bằng cách sử dụng thuộc tính `xlink:href` để chỉ định đường dẫn tới tập tin và sử dụng tiền tố `"file://"` để chỉ ra rằng đây là một tập tin cục bộ trên máy chủ.

Khi tập tin SVG này được xử lý bởi ứng dụng, nó có thể gửi yêu cầu truy cập tập tin `/etc/passwd` và trả về nội dung của tập tin này trong phản hồi. Điều này cho phép kẻ tấn công trích xuất thông tin nhạy cảm như danh sách người dùng và mật khẩu từ tập tin `/etc/passwd`.
